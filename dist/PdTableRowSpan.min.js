!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],t):e.PdTableRowSpan=t(e.$)}(this,function(e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();
/**
 * @Created by k186 on 2018/2/28.
 * @Name: pd-table-row-span
 * @GitHub: https://github.com/k186/pd-table-row-span
 * @Email: k1868548@gmail.com
 * @license: MIT
 */
e.fn.PdTableRowSpan=function(n){var o,i=Array.apply(null,arguments);return i.shift(),this.each(function(){var a=e(this),l=a.data("pdtablerowspan"),d="object"===(void 0===n?"undefined":t(n))&&n;if(l||a.data("pdtablerowspan",l=new r(this,d)),"string"==typeof n&&"function"==typeof l[n]&&void 0!==(o=l[n].apply(l,i)))return!1}),void 0!==o?o:this};var r=function(){function t(o,r){n(this,t),this.$context=e(o),this.$options={},i.init(this,r)}return o(t,[{key:"merge",value:function(){for(var t=this,n=t.$context.find("tbody").children(),o={},r=null!=t.$options.from?t.$options.from:0,i=t.$options.to,a=n.length,l=null!=i?i:n.eq(0).find(t.$options.tags).length,d=r;d<l;d++)for(var f=0;f<a;f++){var u=n.eq(f).find(t.$options.tags).eq(d);o[d]=o[d]?o[d]:[],o[d].push({row:f,col:d,data:u.html(),isMerge:!1,rowSpan:0,mergeId:void 0})}var s=[];for(var p in o)for(var c=o[p],g=0;g<c.length;g++){if(c[g].data==(c[g+1]?c[g+1].data:null)){var m=r;if(null!=o[m][g].mergeId&&o[m][g].mergeId!=o[m][g+1].mergeId&&null!=o[m][g+1].mergeId){o[p][g].isMerge&&(n.eq(g).find("td").eq(p).attr("data-row",o[p][g].mergeId),s.push(o[p][g].mergeId),e.unique(s));continue}o[p][g].isMerge=!0,o[p][g+1].isMerge=!0,null!=o[p][g].mergeId?o[p][g].mergeId=o[p][g].mergeId:o[p][g].mergeId=p+"-"+g,o[p][g+1].mergeId=o[p][g].mergeId,s.push(o[p][g].mergeId),e.unique(s)}o[p][g].isMerge&&n.eq(g).find("td").eq(p).attr("data-row",o[p][g].mergeId)}for(var y=0;y<s.length;y++){var h=n.find("td[data-row="+s[y]+"]");h.eq(0).attr("rowspan",h.length),h.eq(0).css({verticalAlign:t.$options.verticalAlign}),h.each(function(e){0!=e&&this.remove()})}return this.$context}},{key:"destroy",value:function(){var e=this;e.$context.find("tbody").children().remove();var t=e.$tableBackup.find("tbody").children().clone();return e.$context.find("tbody").append(t),e.$context.data("pdtablerowspan",null),e.$options={},this.$context}}]),t}(),i={init:function(t,n){var o=t,r=o.$context;if(r.find("tbody").children().length<1)console.warn(l+"表格无数据");else{o.$options=e.extend(!0,e.extend(!0,{},a),n);var d=e(r).clone();i.regOptions(t,d),o.$tableBackup||(o.$tableBackup=d),o.merge()}},regOptions:function(e,t){var n=e,o=n.$options.from,r=n.$options.to,i=n.$options.verticalAlign,a=t.find("tbody").children().eq(0).find(n.$options.tags).length;o&&(o>=1&&o<=a+1?n.$options.from-=1:n.$options.from=null),r&&(r<=a&&r>=o||(n.$options.to=null)),["top","middle","bottom"].indexOf(i)>-1||(n.$options.verticalAlign="middle")}},a={tags:"td",verticalAlign:"middle",from:null,to:null},l="PdTableRowSpan ERROR: ";return r});
//# sourceMappingURL=PdTableRowSpan.min.js.map
